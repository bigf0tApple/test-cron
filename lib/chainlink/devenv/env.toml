product_type = "ocr2"

[ocr2]
  # LINK token contract address (static for Anvil and testnets)
  link_contract_address = "0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9"
  # Chainlink node funding in ETH (1**18 wei)
  cl_nodes_funding_eth = 50
  # Chainlink node funding in LINK (1**18 wei)
  cl_nodes_funding_link = 50
  # amount of time we'll wait for the first feed answer, if there is no answer environment is not working
  verification_timeout_sec = 400
  # target blockchain finality depth
  chain_finality_depth = 5

  [ocr2.gas_settings]
  # EIP1159 fee cap multiplier (default, for all transactions)
  fee_cap_multiplier = 2
  # EIP1159 fee cap multiplier (default, for all transactions)
  tip_cap_multiplier = 2

  [ocr2.ea_fake]
    # min response value of fake External Adapter
    # values are chosen randomly, either low or high
    min_value = 3
    # max response value of a fake External Adapter
    max_value = 30000
    # changes per minute for returned value
    changes_per_minute = 60

  [ocr2.jobs]
    # maximum job task duration in Go duration in seconds
    max_task_duration_sec = 60

  [ocr2.ocr2_median_offchain_config]
    # If AlphaReportInfinite is true, the deviation check parametrized by
    # AlphaReportPPB will never be satisfied.
    alpha_report_infinite = false
    # If AlphaAcceptInfinite is true, the deviation check parametrized by
    # AlphaAcceptPPB will never be satisfied.
    alpha_accept_infinite = false
    # AlphaReportPPB determines the relative deviation between the median (i.e.
    # answer) in the contract and the current median of observations (offchain)
    # at which a report should be issued. That is, a report is issued if
    # abs((offchainMedian - contractMedian)/contractMedian) >= alphaReport.
    alpha_report_ppb = 1
    # AlphaAcceptPPB determines the relative deviation between the median in a
    # newly generated report considered for transmission and the median of the
    # currently pending report. That is, a report is accepted for transmission
    # if abs((newMedian - pendingMedian)/pendingMedian) >= alphaAccept. If no
    # report is pending, this variable has no effect.
    alpha_accept_ppb = 1
    # DeltaC is the maximum age of the latest report in the contract. If the
    # maximum age is exceeded, a new report will be created by the report
    # generation protocol.
    delta_sec = 1800

  [ocr2.ocr2_set_config]
    # maximum amount of oracles participating in rounds
    r_max = 3
    # no docs here, find docs, tbd
    delta_progress_sec = 30
    delta_resend_sec = 30
    delta_round_sec = 10
    delta_grace_sec = 20
    delta_stage_sec = 20
    max_duration_initialization_sec = 5
    max_duration_query_sec = 5
    max_duration_observation_sec = 5
    max_duration_report_sec = 5
    max_duration_should_accept_finalized_report_sec = 5
    max_duration_should_transmit_accepted_report_sec = 5

  [ocr2.ocr2]
    # A short description of what is being reported
    description = "fake-ea-price"
    # Answers are stored in fixed-point format, with this many digits of precision
    decimals = 18
    # The highest gas price for which transmitter will be compensated
    maximum_gas_price = 3000
    #  The transmitter will receive reward for gas prices under this value
    reasonable_gas_price = 10
    # The reimbursement per ETH of gas cost, in 1e-6LINK units
    micro_link_per_eth = 500
    #  The reward to the oracle for contributing an observation to a successfully transmitted report, in 1e-9LINK units
    link_gwei_per_observation = 500
    # The reward to the transmitter of a successful report, in 1e-9LINK units
    link_gwei_per_transmission = 500
    # The lowest answer the median of a report is allowed to be
    minimum_answer = 1
    # The highest answer the median of a report is allowed to be
    maximum_answer = 50000000000000000
    # The access controller for billing admin functions
    billing_access_controller_addr = "0x0000000000000000000000000000000000000000"
    # The access controller for requesting new rounds
    requester_access_controller_addr = "0x0000000000000000000000000000000000000000"

[[blockchains]]
  chain_id = "1337"
  docker_cmd_params = ["-b", "1", "--mixed-mining", "--slots-in-an-epoch", "1"]
  image = "ghcr.io/foundry-rs/foundry:stable"
  port = "8545"
  type = "anvil"

[fake_server]
  image = "ocr2-fakes:latest"
  port = 9111

[[nodesets]]
  name = "don"
  nodes = 4
  override_mode = "each"

  [nodesets.db]
    image = "postgres:15.0"

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      image = "public.ecr.aws/chainlink/chainlink:2.26.0"

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      image = "public.ecr.aws/chainlink/chainlink:2.26.0"

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      image = "public.ecr.aws/chainlink/chainlink:2.26.0"

  [[nodesets.node_specs]]

    [nodesets.node_specs.node]
      image = "public.ecr.aws/chainlink/chainlink:2.26.0"
